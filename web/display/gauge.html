<html>
	<?php include ("display/gaugevalues.php"); ?>
<script src="/openWB/web/display/gauge.min.js"></script>
      <link rel="stylesheet" href="/openWB/web/display/arrow.css">
      <link rel="stylesheet" href="/openWB/web/display/pin.css">
<?php 
			     if ( $displaytagesgraphold == "1\n") {
     echo ' <script src="js/core.js"></script>
	<script src="js/charts.js"></script>';
	} ?>
<input hidden name="" id="displayevumax" value="<?php echo $displayevumaxold ; ?>" />
<input hidden name="" id="displaypvmax" value="<?php echo $displaypvmaxold ; ?>" />
<input hidden name="" id="displayspeichermax" value="<?php echo $displayspeichermaxold ; ?>" />
<input hidden name="" id="displayhausanzeigen" value="<?php echo $displayhausanzeigenold ; ?>" />
<input hidden name="" id="displayhausmax" value="<?php echo $displayhausmaxold ; ?>" />
<input hidden name="" id="displaylp1max" value="<?php echo $displaylp1maxold ; ?>" />
<input hidden name="" id="displaylp2max" value="<?php echo $displaylp2maxold ; ?>" />
<input hidden name="" id="displaypinaktiv" value="<?php echo $displaypinaktivold ; ?>" />
<input hidden name="" id="displaypincode" value="<?php echo $displaypincodeold ; ?>" />

<div id="main">
<div style="font-size: 18px; height: 20px; top: 0px; left: 740px; text-align:center; position: absolute; width: 65px; color: white;" id="theclock"></div>
<div id="gaugediv">
<div style="font-size: 18px; height: 20px; top: 0px; left: 740px; text-align:center; position: absolute; width: 65px; color: white;" id="theclock"></div>
<?php
     if ( $speicherstatold != "none\n" ){ echo '
<canvas id="evu" style="height: 200px; top: -50px; left: 0px; position: absolute; width: 265px;"></canvas>
<div id="evut" style="font-size: 15px; height: 200px; top: 100px; left: 0px; position: absolute; width: 265px; color: white; text-align:center;">0</div>
<div style="font-size: 15px; height: 200px; top: 75px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">EVU</div>

<canvas id="pv" style="height: 200px; top: -50px; left: 265px; position: absolute; width: 265px;"></canvas>
<div id="pvt" style="font-size: 15px; height: 200px; top: 100px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
<div style="font-size: 15px; height: 200px; top: 75px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">PV</div>
'; } else { echo'
<canvas id="evu" style="height: 200px; top: -50px; left: 132px; position: absolute; width: 265px;"></canvas>
<div id="evut" style="font-size: 15px; height: 200px; top: 100px; left: 132px; position: absolute; width: 265px; color: white; text-align:center;">0</div>
<div style="font-size: 15px; height: 200px; top: 75px; left: 132px; text-align:center; position: absolute; width: 265px; color: white;">EVU</div>

<canvas id="pv" style="height: 200px; top: -50px; left: 397px; position: absolute; width: 265px;"></canvas>
<div id="pvt" style="font-size: 15px; height: 200px; top: 100px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
<div style="font-size: 15px; height: 200px; top: 75px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;">PV</div>
'; } ?>

<div id="speicherstatdiv">
<canvas id="speicher" style="height: 200px; top: -50px; left: 530px; position: absolute; width: 265px;"></canvas>
<div id="speichert" style="font-size: 15px; height: 200px; top: 100px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
<div style="font-size: 15px; height: 200px; top: 75px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;">Speicher</div>
<canvas id="speichers" style="height: 200px; top: -50px; left: 530px; position: absolute; width: 265px;"></canvas>
<div id="speicherst" style="font-size: 15px; height: 100px; top: 60px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;"></div>
</div>





<?php
      if ( $displayhausanzeigenold == "1\n" ) { 
      if ( $lastmanagementold == "1\n" ) { echo '
<div id="hausanzeigen">
	<canvas id="haus" style="height: 200px; top: 120px; left: 0px; position: absolute; width: 265px;"></canvas>
	<div id="haust" style="font-size: 15px; height: 200px; top: 270px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
	<div style="font-size: 15px; height: 200px; top: 250px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">Hausverbrauch</div>
</div>
<canvas id="lp1" style="height: 200px; top: 120px; left: 265px; position: absolute; width: 265px;"></canvas>
<div id="lp1t" style="font-size: 15px; height: 200px; top: 270px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
<div style="font-size: 15px; height: 200px; top: 250px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">'.$lp1nameold.'<span id="plugstatlp1div"></div>
<canvas id="lp1s" style="height: 200px; top: 120px; left: 265px; position: absolute; width: 265px;"></canvas>
<div id="lp1st" style="font-size: 15px; height: 200px; top: 230px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">0</div>


<canvas id="lp2" style="height: 200px; top: 120px; left: 530px; position: absolute; width: 265px;"></canvas>

<div id="lp2t" style="15px; height: 100px; top: 270px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;"></div>
<div style="font-size: 15px; height: 100px; top: 250px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;">'.$lp2nameold.'<span id="plugstatlp2div"></div>
<canvas id="lp2s" style="height: 200px; top: 120px; left: 530px; position: absolute; width: 265px;"></canvas>
<div id="lp2st" style="15px; height: 100px; top: 230px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;"></div>


'; } else { echo '
<div id="hausanzeigen">
	<canvas id="haus" style="height: 200px; top: 120px; left: 132px; position: absolute; width: 265px;"></canvas>
	<div id="haust" style="font-size: 15px; height: 200px; top: 270px; left: 132px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
	<div style="font-size: 15px; height: 200px; top: 250px; left: 132px; text-align:center; position: absolute; width: 265px; color: white;">Hausverbrauch</div>
</div>
<canvas id="lp1" style="height: 200px; top: 120px; left: 397px; position: absolute; width: 265px;"></canvas>
<div id="lp1t" style="font-size: 15px; height: 200px; top: 270px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
<div style="font-size: 15px; height: 200px; top: 250px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;">'.$lp1nameold.'<span id="plugstatlp1div"></div>
<canvas id="lp1s" style="height: 200px; top: 120px; left: 397px; position: absolute; width: 265px;"></canvas>
<div id="lp1st" style="font-size: 15px; height: 200px; top: 230px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;">0</div>

<div id="lp2anzeigen">
<canvas id="lp2" style="height: 200px; top: 120px; left: 530px; position: absolute; width: 265px;"></canvas>

<div id="lp2t" style="15px; height: 100px; top: 270px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;"></div>
<div style="font-size: 15px; height: 100px; top: 250px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;">'.$lp2nameold.'<span id="plugstatlp2div"></div>
<canvas id="lp2s" style="height: 200px; top: 120px; left: 530px; position: absolute; width: 265px;"></canvas>
<div id="lp2st" style="15px; height: 100px; top: 230px; left: 530px; text-align:center; position: absolute; width: 265px; color: white;"></div>
</div>
';

		} } else { 
      if ( $lastmanagementold == "1\n" ) { echo '

<div id="hausanzeigen">
	<canvas id="haus" style="height: 200px; top: 120px; left: 0px; position: absolute; width: 265px;"></canvas>
	<div id="haust" style="font-size: 15px; height: 200px; top: 270px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
	<div style="font-size: 15px; height: 200px; top: 250px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">Hausverbrauch</div>
</div>
<canvas id="lp1" style="height: 200px; top: 120px; left: 132px; position: absolute; width: 265px;"></canvas>
<div id="lp1t" style="font-size: 15px; height: 200px; top: 270px; left: 132px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
<div style="font-size: 15px; height: 200px; top: 250px; left: 132px; text-align:center; position: absolute; width: 265px; color: white;">'.$lp1nameold.'<span id="plugstatlp1div"></div>
<canvas id="lp1s" style="height: 200px; top: 120px; left: 132px; position: absolute; width: 265px;"></canvas>
<div id="lp1st" style="font-size: 15px; height: 200px; top: 230px; left: 132px; text-align:center; position: absolute; width: 265px; color: white;">0</div>

<div id="lp2anzeigen">
<canvas id="lp2" style="height: 200px; top: 120px; left: 397px; position: absolute; width: 265px;"></canvas>

<div id="lp2t" style="15px; height: 100px; top: 270px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;"></div>
<div style="font-size: 15px; height: 100px; top: 250px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;">'.$lp2nameold.'<span id="plugstatlp2div"></div>
<canvas id="lp2s" style="height: 200px; top: 120px; left: 397px; position: absolute; width: 265px;"></canvas>
<div id="lp2st" style="15px; height: 100px; top: 230px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;"></div>
</div>	'; } else {
echo ' 
<div id="hausanzeigen">
	<canvas id="haus" style="height: 200px; top: 120px; left: 0px; position: absolute; width: 265px;"></canvas>
	<div id="haust" style="font-size: 15px; height: 200px; top: 270px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
	<div style="font-size: 15px; height: 200px; top: 250px; left: 0px; text-align:center; position: absolute; width: 265px; color: white;">Hausverbrauch</div>
</div>
<canvas id="lp1" style="height: 200px; top: 120px; left: 265px; position: absolute; width: 265px;"></canvas>
<div id="lp1t" style="font-size: 15px; height: 200px; top: 270px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">0</div>
<div style="font-size: 15px; height: 200px; top: 250px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">'.$lp1nameold.'<span id="plugstatlp1div"></div>
<canvas id="lp1s" style="height: 200px; top: 120px; left: 265px; position: absolute; width: 265px;"></canvas>
<div id="lp1st" style="font-size: 15px; height: 200px; top: 230px; left: 265px; text-align:center; position: absolute; width: 265px; color: white;">0</div>

<div id="lp2anzeigen">
<canvas id="lp2" style="height: 200px; top: 120px; left: 397px; position: absolute; width: 265px;"></canvas>

<div id="lp2t" style="15px; height: 100px; top: 270px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;"></div>
<div style="font-size: 15px; height: 100px; top: 250px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;">'.$lp2nameold.'<span id="plugstatlp2div"></div>
<canvas id="lp2s" style="height: 200px; top: 120px; left: 397px; position: absolute; width: 265px;"></canvas>
<div id="lp2st" style="15px; height: 100px; top: 230px; left: 397px; text-align:center; position: absolute; width: 265px; color: white;"></div>
</div>';	
}}
?>
</div>
<div id="symboldiv" style="color: white; top: 0px; left: 10px; position: absolute; font-size: 18px; width: 810px;">
<div class="row col-xs-12 text-center" style="height: 50px;">
		<div class="col-xs-4">
		</div>

		<div class="col-xs-4">

			<i class="fas fa-2x fa-solar-panel" style="color: green;"></i>
			<br>
			<span id="pvdiv"></span>
		</div>
		<div class="col-xs-4">
			
		</div>
</div>
<div class="row col-xs-12 text-center" style="height: 50px;">
		<div class="col-xs-6">
		</div>

	<div class="col-xs-1 text-center">
				<div id="speedpv">
					<div id="arrowpv"></div>
 				</div>
		</div>
		<div class="col-xs-5">
		</div>
</div>
<div class="row col-xs-12 text-center" style="height: 50px;">
		<div class="col-xs-2">
				    <img src="img/icons/electric-tower.svg" style="filter: invert(1); -webkit-filter: invert(1);" width="40vw" >
		</div>

		<div class="col-xs-3">
				<div id="speedevu">
					<div id="arrowevu"></div>
 				</div>
				<span id="bezugdiv"></span>
		</div>
	
		<div class="col-xs-2">
			<i class="fas fa-2x fa-home swhite" style="color: white;"></i><br><span id="hausverbrauchdiv">	

		</div>
		<div id="speicherstat2div">
		<div class="col-xs-3">
				<div id="speedspeicher">
					<div id="arrowspeicher"></div>
 				</div>
				<span id="speicherleistungdiv"></span>

		</div>
		<div class="col-xs-2">
				<span id="speichersocstatdiv" class="fas fa-2x"></span>
				<br><span id="speichersocdiv"></span> %
		</div>


		</div>
</div>
<div class="row col-xs-12 text-center" style="height: 40px;">
	<div class="col-xs-6">
	</div>
	<div class="col-xs-1 text-center">
		<div id="speedlpg">
			<div id="arrowlpg"></div>
		</div>
		</div>
		<div class="col-xs-5">
		</div>
</div>
<div class="row col-xs-12 text-center" style="height: 40px;">
		<div class="col-xs-5">
		</div>
		<div class="col-xs-2 text-center">
			<span id="gesamtllwdiv"></span><br>
		</div>
		<div class="col-xs-5">
		</div>
</div>
<?php if ( $lastmanagementold == "1\n" ) { echo '

<div class="row col-xs-12 text-center" style="height: 50px;">
		<div class="col-xs-2">

		<span id="lp1enableddiv" class="fa fa-2x" style="cursor: pointer; outline:none;" onclick="lp1checkenabledclick()"></span><span id="stationlp1" class="fas fa-2x fa-charging-station"></span>
		</div>

		<div class="col-xs-2">
				<div id="speedlp1">
					<div id="arrowlp1"></div>
 				</div>
			<span id="lldiv"></span>
		</div>

		<div class="col-xs-1">
			<i id="carlp1" class="fas fa-2x fa-car-side"></i><br>'.$lp1nameold.'

		</div>
		<div class="col-xs-1">
	       		<div id="socenabledlp1">
				<span id="socstatlp1div" class="fas fa-2x"></span>
				<br><span id="soclevel"></span>%</span>
			</div>
		</div>

		<div class="col-xs-2">
		<span id="lp2enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp2checkenabledclick()"></span><span id="stationlp2" class="fas fa-2x fa-charging-station"></span>	
		</div>

		<div class="col-xs-2">
				<div id="speedlp2">
					<div id="arrowlp2"></div>
 				</div>
			<span id="lllp2div"></span>
		</div>

		<div class="col-xs-1">
			<i id="carlp2" class="fas fa-2x fa-car-side"></i><br>'.$lp2nameold.'

		</div>
		<div class="col-xs-1">
	       <div id="socenabledlp2">
			<span id="socstatlp2div" class="fas fa-2x"></span>
			<br><span id="soc1level"></span>%</span>
	       </div>
		</div>
</div>
'; } else { echo '
<div class="row col-xs-12 text-center" style="height: 100px;">
		<div class="col-xs-2">

		<span id="lp1enableddiv" class="fa fa-2x" style="cursor: pointer;" onclick="lp1enabledclick()"></span><span id="stationlp1" class="fas fa-2x fa-charging-station"></span>
		</div>

		<div class="col-xs-3">
				<div id="speedlp1">
					<div id="arrowlp1"></div>
 				</div>
			<span id="lldiv"></span>
		</div>

		<div class="col-xs-2">
			<i id="carlp1" class="fas fa-2x fa-car-side"></i><br>'.$lp1nameold.'

		</div>
		<div class="col-xs-2">
		<div id="socenabledlp1">
			<span id="socstatlp1div" class="fas fa-2x"></span>
			<br><span id="soclevel"></span>% </span>
		</div>
		</div>
		<div class="col-xs-3">

		</div>


</div> '; } ?>



</div>

<div class="row col-xs-12 text-center" style="font-size: 15px; height: 20px; top: 320px; left: 0px; position: absolute; width: 820px; color: white; text-align:center;"> 




        <div class="row"> 
	        <div id="lastregelungaktivdiv" class="col-xs-12 text-center" style="color:#990000;font-size: 30px"> 
                </div> 
        </div> 														 
</div>
<div class="row col-xs-12 text-center" style="font-size: 15px; height: 20px; top: 320px; left: 40px; position: absolute; width: 800px; color: white; text-align:center;"> 

    
         <div class=" col-xs-2"> 
	<?php 
			     if ( $displaytagesgraphold == "1\n") {
     echo ' 	
	 	 <input type="submit" class="1graph btn btn-blue btn-block"  name="graph" value="Tagesgraph">
		'; } ?>
                </div> 
		<div class="col-xs-2">
			<div id="sofortllbtn">
			<input type="submit" class="1sofortll btn btn-blue btn-block"  name="sofortllbtn" value="Ladestrom">
		</div>
		</div>

		<div class="col-xs-3">
		<input id="lp1checkenabled" type="button" class="btn btn-blue btn-block" value="LP1 (de-)aktivieren" onclick="lp1checkenabledclick();" />
		</div>
	<?php if ( $lastmanagementold == "1\n" ) { echo '
		<div class="col-xs-3">
		<input id="lp2checkenabled" type="button" class="btn btn-blue btn-block" value="LP2 (de-)aktivieren" onclick="lp2checkenabledclick();" />
		</div>'; } else { echo '
		<div class="col-xs-2"></div>'; } ?>
        <div class=" col-xs-2"> 
			<input type="submit" class="1einstellungen btn btn-blue btn-block"  name="graph" value="Status">

                </div> 

</div>
<div class="row">
<div class="container" style="left:20px;bottom:0px;position:absolute;">
	<div class="col-xs-3 text-center">
		<div class="actstat">
			<input type="submit" class="1sofort btn btn-lg btn-block" style="font-size: 2vw" name="sofort" value="Sofort Laden">
	
		</div>
	</div>

	<div class="col-xs-2 text-center">
		<div class="actstat4">
			<input type="submit" class="1standby btn btn-lg btn-block" style="font-size: 2vw" name="standby" value="Standby">
		</div>
	</div>
	<div class="col-xs-2 text-center">
		<div class="actstat3">
			<input type="submit" class="1stop btn btn-lg btn-block" style="font-size: 2vw" name="stop" value="Stop">
		</div>
	</div>
	<div class="col-xs-2 text-center">
		<div class="actstat1">
			<input type="submit" class="1minpv btn btn-lg btn-block" style="font-size: 2vw" name="minpv" value="Min + PV">
	
		</div>
	</div>
	<div class="col-xs-3 text-center">
		<div class="actstat2">
			<input type="submit" class="1nurpv btn btn-lg btn-block" style="font-size: 2vw" name="nurpv" value="Nur PV">
	
		</div>
	</div>
</div>
</div>
</div>
<div id="sofortll">

		<div class="col-xs-12 text-center" style="font-size: 22px; height: 10px; top: 30px; left: 50px; position: absolute; width: 750px; color: white; text-align:left;">
		<div id="slider1div" class="col-xs-12 text-center">

			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp1s" id="sofortlllp1s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp1">LP 1: <span id="sofortlllp1l"></span>A</label>  
			</div>
			<script>
				var slider1 = document.getElementById("sofortlllp1s");
				var output1 = document.getElementById("sofortlllp1l");
				output1.innerHTML = slider1.value;
				slider1.oninput = function() {
					output1.innerHTML = this.value;
					lp1DirectChargeAmpsClick();
				}
			</script>
		</div>
		<div id="slider2div" class="col-xs-12 text-center">

			<div class="col-xs-8 text-center">
				<input type="range" min=<?php echo $minimalstromstaerkeold ?> max=<?php echo $maximalstromstaerkeold ?> step="1" name="sofortlllp2s" id="sofortlllp2s">
				
			</div>
			<div class="col-xs-4 text-center">
				<label for="sofortlllp2">LP 2: <span id="sofortlllp2l"></span>A</label>  
			</div>
			<script>
				var slider2 = document.getElementById("sofortlllp2s");
				var output2 = document.getElementById("sofortlllp2l");
				output2.innerHTML = slider2.value;
				slider2.oninput = function() {
					output2.innerHTML = this.value;
					lp2DirectChargeAmpsClick();	
				}
			</script>
		</div>
		</div>
	<div class="row col-xs-12 text-center" style="font-size: 12px; height: 10px; top: 430px; left: 50px; position: absolute; width: 750px; color: white; text-align:center;"> 

	    <div class=" col-xs-8">
</div>
        <div class=" col-xs-2"> 
		<input type="submit" class="1sllspeichern btn-blue btn btn-block" style="height: 10px; line-height: 3px !important;" name="sllspeichern" value="Speichern">
                </div> 
        <div class=" col-xs-2"> 
		<input type="submit" class="1zurueck btn-blue btn btn-block" style="height: 10px; line-height: 3px !important;" name="zurueck" value="Zurück">
                </div> 
        </div> 		
</div>

<div id="einstellungen">
	<div id="status">
			<div style="font-size: 25px; height: 20px; top: 0px; left: 0px; text-align:center; position: absolute; width: 800px; color: white;">Status</div>
	<div class="row col-xs-12 text-left" style="font-size: 22px; height: 10px; top: 30px; left: 50px; position: absolute; width: 750px; color: white; text-align:left;"> 
		IP Adresse der openWB: <span id="ethaddr"></span> <span id="wlanaddr"></span>

	</div>
	<div class="row col-xs-12 text-left" style="font-size: 22px; height: 10px; top: 50px; left: 50px; position: absolute; width: 750px; color: white; text-align:left;"> 

			<?php
				echo "
					</textarea>
					</td><td width='50%'></b>
					<br>	Uptime: <span id='uptime'>--</span>
					";
				echo "<br>CPU: ";
				echo "
					<meter id='cpu' high=85 min=0 max=100></meter> <span id='cpuuse'>--</span>%
					Memory: <span id='memtot'>--</span>MB
					<meter id='mem' min='0'></meter>  <font size='-1'>(<span id='memfree'>--</span>MB free)</font>
					<br>Disk Usage: <span id='diskuse'>--</span>, <span id='diskfree'>--</span> avail.
					</td></tr>
					</table>";
				echo "<br>openWB Version: " . $owbversion;

			?>
			<script type='text/javascript'>
  			function updateit() {
  				$.getJSON('tools/programmloggerinfo.php', function(data){
  					json = eval(data);
  					document.getElementById('cpu').value= json.cpuuse;
  					document.getElementById('uptime').innerHTML = json.uptime;
  					document.getElementById('cpuuse').innerHTML = json.cpuuse;
  					document.getElementById('memtot').innerHTML = json.memtot;
  					document.getElementById('mem').max= json.memtot;
  					document.getElementById('mem').value= json.memuse;
  					document.getElementById('mem').high = (json.memtot*0.85);
  					document.getElementById('memfree').innerHTML = json.memfree;
  					document.getElementById('diskuse').innerHTML = json.diskuse;
  					document.getElementById('diskfree').innerHTML = json.diskfree;
 					document.getElementById('ethaddr').innerHTML = json.ethaddr; 
 					document.getElementById('wlanaddr').innerHTML = json.wlanaddr; 
				})
  			}
  			$(document).ready(function() {
  				updateit();
  				setInterval(updateit, 10000);
  			})
			</script>
	</div>
	</div>
	<div id="hilfe">
		<div style="font-size: 25px; height: 20px; top: 0px; left: 0px; text-align:center; position: absolute; width: 800px; color: white;">Hilfe</div>
			<div class="row col-xs-12 text-left" style="font-size: 22px; height: 10px; top: 30px; left: 50px; position: absolute; width: 750px; color: white; text-align:left;"> 
				Symbollegende: <br>
				<i class="fas fa-charging-station"></i> keine Ladung freigegeben, 
				<i class="fas fa-charging-station" style="color: green;"></i>Ladung freigegeben<br>
				<i class="fas fa-car-side"></i>Auto nicht angesteckt,<i class="fas fa-car-side" style="color: blue;"></i>Auto angesteckt<br>
				<i class="fas fa-battery-half"></i>Auto nicht ladend,<i class="fas fa-battery-half" style="color: green"></i> Auto ladend
			</div>
	</div>
	<div class="row col-xs-12 text-center" style="font-size: 12px; height: 10px; top: 430px; left: 50px; position: absolute; width: 750px; color: white; text-align:center;"> 
		<div class=" col-xs-8">
		</div>
        	<div class=" col-xs-2"> 
			<input type="submit" class="1hilfe btn-blue btn btn-block" style="height: 10px; line-height: 3px !important;" name="hilfe" value="Hilfe">
        	</div> 
        	<div class=" col-xs-2"> 
			<input type="submit" class="1zurueck btn-blue btn btn-block" style="height: 10px; line-height: 3px !important;" name="zurueck" value="Zurück">
        	</div> 
	</div> 		
</div>
<div id="dergraph">
<?php
	$result = '';
	$lines = file('/var/www/html/openWB/openwb.conf');
	foreach($lines as $line) {
		if(strpos($line, "grapham=") !== false) {
			list(, $graphamold) = explode("=", $line);
		}
		if(strpos($line, "graphinteractiveam=") !== false) {
			list(, $graphinteractiveamold) = explode("=", $line);
		}

		if(strpos($line, "lastmanagement=") !== false) {
			list(, $lastmanagementold) = explode("=", $line);
		}
		if(strpos($line, "lastmanagements2=") !== false) {
			list(, $lastmanagements2old) = explode("=", $line);
		}
		if(strpos($line, "verbraucher1_name=") !== false) {
			list(, $verbraucher1_nameold) = explode("=", $line);
		}
		if(strpos($line, "verbraucher2_name=") !== false) {
			list(, $verbraucher2_nameold) = explode("=", $line);
		}
		if(strpos($line, "verbraucher3_name=") !== false) {
			list(, $verbraucher3_nameold) = explode("=", $line);
		}



	}
    
	$speichervorhanden = file_get_contents('/var/www/html/openWB/ramdisk/speichervorhanden');
	$soc1vorhanden = file_get_contents('/var/www/html/openWB/ramdisk/soc1vorhanden');
	$verbraucher1vorhanden = file_get_contents('/var/www/html/openWB/ramdisk/verbraucher1vorhanden');
	$verbraucher2vorhanden = file_get_contents('/var/www/html/openWB/ramdisk/verbraucher2vorhanden');
	$verbraucher3vorhanden = file_get_contents('/var/www/html/openWB/ramdisk/verbraucher3vorhanden');
	$verbraucher1_nameold = trim(preg_replace('/\s+/', ' ', $verbraucher1_nameold));
	$verbraucher2_nameold = trim(preg_replace('/\s+/', ' ', $verbraucher2_nameold));
	$verbraucher3_nameold = trim(preg_replace('/\s+/', ' ', $verbraucher3_nameold));

					?>


	<div style="height:440px; width:800px;" id="dailydiv"></div>

<div class="row col-xs-12 text-center" style="font-size: 12px; height: 10px; top: 430px; left: 50px; position: absolute; width: 750px; color: white; text-align:center;"> 

	    <div class=" col-xs-10">
</div> 
        <div class=" col-xs-2"> 
		<input type="submit" class="1zurueck btn-blue btn btn-block" style="height: 10px; line-height: 3px !important;" name="zurueck" value="Zurück">
                </div> 
        </div> 														 
</div>



<div id="pin">
  <div class="dots">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
  <p>PIN</p>
  <div class="numbers">
    <div class="number">1</div>
    <div class="number">2</div>
    <div class="number">3</div>
    <div class="number">4</div>
    <div class="number">5</div>
    <div class="number">6</div>
    <div class="number">7</div>
    <div class="number">8</div>
    <div class="number">9</div>
  </div>
</div>


<script>
function startTime() {
	var today = new Date();
	var h = today.getHours();
	var m = today.getMinutes();
	m = checkTime(m);
	document.getElementById('theclock').innerHTML =
	h + ":" + m;
	var t = setTimeout(startTime, 5000);
}
function checkTime(i) {
	    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
	        return i;
}
startTime();
	 $('#pin').hide();
	var displayhausmax = <?php echo $displayhausmaxold ?>;
	var displaylp2max = <?php echo $displaylp2maxold ?>;
	var displaylp1max = <?php echo $displaylp1maxold ?>;
	var displaypvmax = <?php echo $displaypvmaxold ?>;
	var displayevumax = <?php echo $displayevumaxold ?>;
	var displayspeichermax = <?php echo $displayspeichermaxold ?>;
	var displayhausanzeigen = <?php echo $displayhausanzeigenold ?>;
	var displaypincode = <?php echo $displaypincodeold ?>;
	var displaypinaktiv = <?php echo $displaypinaktivold ?>;
	var lastmanagementold = <?php echo $lastmanagementold ?>;
	if ( displayhausanzeigen == '1') {
        $('#hausanzeigen').show();
    } else {
        $('#hausanzeigen').hide();

    }
    if ( lastmanagementold == '1') {
        $('#lp2anzeigen').show();
    } else {
        $('#lp2anzeigen').hide();

    }

var dash = 1;


var displaylock = 1;

	function execnurpv(){
	    var ajaxurl = 'tools/changelademodusd.php?pvuberschuss=1';
	    $.post(ajaxurl, 'nurpv', function (response) {
                $('.actstat2 .btn').addClass("btn-green");
                $('.actstat3 .btn').addClass("btn-red");
                $('.actstat .btn').addClass("btn-red");
                $('.actstat1 .btn').addClass("btn-red");
                $('.actstat .btn').removeClass("btn-green");
                $('.actstat2 .btn').removeClass("btn-red");
                $('.actstat3 .btn').removeClass("btn-green");
                $('.actstat1 .btn').removeClass("btn-green");
                $('.actstat4 .btn').addClass("btn-red");
                $('.actstat4 .btn').removeClass("btn-green");
   		$('#sofortllbtn').hide();
	    });
	}

	function execminpv(){
	    var ajaxurl = 'tools/changelademodusd.php?minundpv=1';
	    $.post(ajaxurl, 'minpv', function (response) {
                $('.actstat2 .btn').addClass("btn-red");
                $('.actstat3 .btn').addClass("btn-red");
                $('.actstat .btn').addClass("btn-red");
                $('.actstat1 .btn').addClass("btn-green");
                $('.actstat .btn').removeClass("btn-green");
                $('.actstat2 .btn').removeClass("btn-green");
                $('.actstat3 .btn').removeClass("btn-green");
                $('.actstat1 .btn').removeClass("btn-red");
                $('.actstat4 .btn').addClass("btn-red");
                $('.actstat4 .btn').removeClass("btn-green");
   		$('#sofortllbtn').hide();

	    });
	}

	function execstop(){
	    var ajaxurl = 'tools/changelademodusd.php?stop=1';
	    $.post(ajaxurl, 'stop', function (response) {
                $('.actstat2 .btn').addClass("btn-red");
                $('.actstat3 .btn').addClass("btn-green");
                $('.actstat .btn').addClass("btn-red");
                $('.actstat1 .btn').addClass("btn-red");
                $('.actstat .btn').removeClass("btn-green");
                $('.actstat2 .btn').removeClass("btn-green");
                $('.actstat3 .btn').removeClass("btn-red");
                $('.actstat1 .btn').removeClass("btn-green");
                $('.actstat4 .btn').addClass("btn-red");
                $('.actstat4 .btn').removeClass("btn-green");
   		$('#sofortllbtn').hide();

	    });
	}


	function execstandby(){
	    var ajaxurl = 'tools/changelademodusd.php?semistop=1';
	    $.post(ajaxurl, 'standby', function (response) {
                $('.actstat2 .btn').addClass("btn-red");
                $('.actstat3 .btn').addClass("btn-red");
                $('.actstat .btn').addClass("btn-red");
                $('.actstat1 .btn').addClass("btn-red");
                $('.actstat .btn').removeClass("btn-green");
                $('.actstat2 .btn').removeClass("btn-green");
                $('.actstat3 .btn').removeClass("btn-green");
                $('.actstat1 .btn').removeClass("btn-green");
                $('.actstat4 .btn').addClass("btn-green");
                $('.actstat4 .btn').removeClass("btn-red");
   		$('#sofortllbtn').hide();


	    });
	}
	function execsofort(){
	    var ajaxurl = 'tools/changelademodusd.php?jetzt=1';
	    $.post(ajaxurl, 'sofort', function (response) {
                $('.actstat2 .btn').addClass("btn-red");
                $('.actstat3 .btn').addClass("btn-red");
                $('.actstat .btn').addClass("btn-green");
                $('.actstat1 .btn').addClass("btn-red");
                $('.actstat .btn').removeClass("btn-red");
                $('.actstat2 .btn').removeClass("btn-green");
                $('.actstat3 .btn').removeClass("btn-green");
                $('.actstat1 .btn').removeClass("btn-green");
                $('.actstat4 .btn').addClass("btn-red");
                $('.actstat4 .btn').removeClass("btn-green");
   		$('#sofortllbtn').show();

	    });
	}

var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0.1, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: true,     // If false, max value increases automatically if value > maxValue
  limitMin: true,     // If true, the min value of the gauge will be fixed
  //colorStart: 'green',   // Colors
  //colorStop: 'red',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  percentColors: [[0.0, "#00FF00" ], [1.0, "#FF0000"]],
  generateGradient: true,
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [displayevumax * -1, 0, displayevumax],  // Print labels at these values
		color: "#FFFFFF",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		},
	       staticZones: [
	          {strokeStyle: "#F03E3E", min: 2000, max: 30000}, // Red from 100 to 130
      {strokeStyle: "#FFDD00", min: 0, max: 2000}, // Yellow
   {strokeStyle: "#30B32D", min: -20000, max: 0}, // Green
],  
};
var target = document.getElementById('evu'); // your canvas element
var gauge = new Gauge(target).setOptions(opts); // create sexy gauge!
gauge.maxValue = displayevumax; // set max gauge value
gauge.setMinValue(displayevumax * -1);  // Prefer setter over gauge.minValue = 0
gauge.animationSpeed = 50; // set animation speed (32 is default value)

gauge.set(0); // set actual value
////////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: true,     // If true, the min value of the gauge will be fixed
  colorStart: 'green',   // Colors
  colorStop: 'green',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  percentColors: [[0.0, "#20610f" ], [1.0, "#00FF00"]],
  generateGradient: true,
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, displaypvmax],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetpv = document.getElementById('pv'); // your canvas element
var gaugepv = new Gauge(targetpv).setOptions(opts); // create sexy gauge!
gaugepv.maxValue = displaypvmax; // set max gauge value
gaugepv.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugepv.animationSpeed = 5; // set animation speed (32 is default value)
gaugepv.set(000); // set actual value
////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0.1, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: true,     // If false, max value increases automatically if value > maxValue
  limitMin: true,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
 percentColors: [[0.0, "#FF0000" ], [0.5, "#FFFF00"],[1.0, "#00FF00"]],
  generateGradient: true,
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [displayspeichermax * -1, 0, displayspeichermax],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
	       staticZones: [
	          {strokeStyle: "#F03E3E", min: displayspeichermax * -1, max: -300}, // Red from 100 to 130
      {strokeStyle: "#FFDD00", min: -300, max: 0}, // Yellow
   {strokeStyle: "#30B32D", min: 0, max: displayspeichermax}, // Green
],  
};
var targetspeicher = document.getElementById('speicher'); // your canvas element
var gaugespeicher = new Gauge(targetspeicher).setOptions(opts); // create sexy gauge!
gaugespeicher.maxValue = displayspeichermax; // set max gauge value
gaugespeicher.setMinValue(displayspeichermax * -1);  // Prefer setter over gauge.minValue = 0
gaugespeicher.animationSpeed = 5; // set animation speed (32 is default value)
gaugespeicher.set(0); // set actual value
///////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.08, // The line thickness
  radiusScale: 0.5, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 100],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetspeichers = document.getElementById('speichers'); // your canvas element
var gaugespeichers = new Gauge(targetspeichers).setOptions(opts); // create sexy gauge!
gaugespeichers.maxValue = 100; // set max gauge value
gaugespeichers.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugespeichers.animationSpeed = 5; // set animation speed (32 is default value)
gaugespeichers.set(70); // set actual value


////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: true,     // If true, the min value of the gauge will be fixed
  colorStart: '#6EFFF8',   // Colors
  colorStop: '#6EFFF8',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, (displayhausmax / 2), displayhausmax],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targethaus = document.getElementById('haus'); // your canvas element
var gaugehaus = new Gauge(targethaus).setOptions(opts); // create sexy gauge!
gaugehaus.maxValue = displayhausmax; // set max gauge value
gaugehaus.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugehaus.animationSpeed = 5; // set animation speed (32 is default value)
gaugehaus.set(0); // set actual value
/////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: true,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, displaylp1max],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetlp1 = document.getElementById('lp1'); // your canvas element
var gaugelp1 = new Gauge(targetlp1).setOptions(opts); // create sexy gauge!
gaugelp1.maxValue = displaylp1max; // set max gauge value
gaugelp1.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugelp1.animationSpeed = 5; // set animation speed (32 is default value)
gaugelp1.set(0); // set actual value
/////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.08, // The line thickness
  radiusScale: 0.5, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 100],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetlp1s = document.getElementById('lp1s'); // your canvas element
var gaugelp1s = new Gauge(targetlp1s).setOptions(opts); // create sexy gauge!
gaugelp1s.maxValue = 100; // set max gauge value
gaugelp1s.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugelp1s.animationSpeed = 5; // set animation speed (32 is default value)
gaugelp1s.set(70); // set actual value
////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.24, // The line thickness
  radiusScale: 0.67, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],

		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, displaylp2max],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetlp2 = document.getElementById('lp2'); // your canvas element
var gaugelp2 = new Gauge(targetlp2).setOptions(opts); // create sexy gauge!
gaugelp2.maxValue = displaylp2max; // set max gauge value
gaugelp2.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugelp2.animationSpeed = 5; // set animation speed (32 is default value)
gaugelp2.set(0); // set actual value
/////////////////////////
var opts = {
  angle: 0, // The span of the gauge arc
  lineWidth: 0.08, // The line thickness
  radiusScale: 0.5, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: true,     // If true, the min value of the gauge will be fixed
  colorStart: '#6FADCF',   // Colors
  colorStop: '#8FC0DA',    // just experiment with them
  strokeColor: 'grey',  // to see which ones work best for you
  generateGradient: true,
percentColors: [[0.0, "#73c0FF" ], [1.0, "#0000FF"]],
		staticLabels: {
		font: "13px sans-serif",  // Specifies font
		labels: [0, 100],  // Print labels at these values
		color: "white",  // Optional: Label text color
		fractionDigits: 0  // Optional: Numerical precision. 0=round off.
		}, 
};
var targetlp2s = document.getElementById('lp2s'); // your canvas element
var gaugelp2s = new Gauge(targetlp2s).setOptions(opts); // create sexy gauge!
gaugelp2s.maxValue = 100; // set max gauge value
gaugelp2s.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gaugelp2s.animationSpeed = 5; // set animation speed (32 is default value)
gaugelp2s.set(70); // set actual value


var displaytheme = <?php echo $displaythemeold ?>;

var doInterval;
function getfile() {
if (displaytheme == 0) {
	$.ajaxSetup({ cache: false});
 $.ajax({
    url: "/openWB/ramdisk/wattbezug",
    complete: function(request){
	    var wattbezug = request.responseText;
	    var intbezug = parseInt(wattbezug, 10);
	    gauge.set(wattbezug);
	    if (intbezug > 0) {
		    $("#evut").html(request.responseText + " W<br>Bezug");
	    } else {
		wattbezug = wattbezug * -1; 
		$("#evut").html(wattbezug + " W<br>Einspeisung");
   
	    };
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/pvwatt",
    complete: function(request){
	    var pvwatt = request.responseText;
	    pvwatt = pvwatt * -1;
		gaugepv.set(pvwatt);
		$("#pvt").html(pvwatt + " W");
	
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/speicherleistung",
    complete: function(request){
	    var speicherwatt = request.responseText;
		gaugespeicher.set(speicherwatt);
		if ( speicherwatt > 0) {
			$("#speichert").html(request.responseText + " W<br>Ladung");
		} else {
			speicherwatt = speicherwatt * -1;
			$("#speichert").html(speicherwatt + " W<br>Entladung");
		}


    }
  });
 $.ajax({
    url: "/openWB/ramdisk/speichersoc",
    complete: function(request){
	    var speichers = request.responseText;
		gaugespeichers.set(speichers);
		$("#speicherst").html(request.responseText + "%");
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/hausverbrauch",
    complete: function(request){
	    var hausverbrauch = request.responseText;
		gaugehaus.set(hausverbrauch);
		$("#haust").html(request.responseText + " W");
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/llaktuell",
    complete: function(request){
	    var lp1w = request.responseText;
		gaugelp1.set(lp1w);
		$("#lp1t").html(request.responseText + " W");
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/llaktuells1",
    complete: function(request){
	    var lp2w = request.responseText;
		gaugelp2.set(lp2w);
		$("#lp2t").html(request.responseText + " W");

    }
  });
 $.ajax({
    url: "/openWB/ramdisk/soc",
    complete: function(request){
	    var lp1s = request.responseText;
		gaugelp1s.set(lp1s);
		$("#lp1st").html(request.responseText + "%");
    }
  });
 $.ajax({
    url: "/openWB/ramdisk/soc1",
    complete: function(request){
	    var lp2s = request.responseText;
		gaugelp2s.set(lp2s);
		$("#lp2st").html(request.responseText + "%");
    }
  });

}


}

doInterval = setInterval(getfile, 10000);
getfile();

//setInterval(function(){gauge.set(wattbezug)}, 200)
	</script>


  <script>
	var displaytheme = <?php echo $displaythemeold ?>;
$('#gaugediv').hide();
$('#symboldiv').hide();

		$('#dergraph').hide();
		$('#einstellungen').hide();
		$('#sofortll').hide();
		$('#sofortllbtn').hide();
		if ( displaytheme == 0 ) {
	   	$('#gaugediv').show();
		}
		if ( displaytheme == 1 ) {
	   	$('#symboldiv').show();
		}

var stop = 0;
var sofort = 0;
var standby = 0;
var nurpv = 0;
var minpv = 0;
var lock = 0;
$(document).ready(function(){

   $('.1einstellungen').click(function(){

		$('#main').hide();
		dash = 0;
	//	execgraph();

       
	       	$('#einstellungen').show();
		$('#status').show();
		$('#hilfe').hide();
       	   });
   $('.1graph').click(function(){

		$('#main').hide();
		dash = 0;
	//	execgraph();

       
	       	$('#dergraph').show();
       	   });
   $('.1sofortll').click(function(){
		var llsolllp1;
		$('#main').hide();
	       	$('#sofortll').show();
		dash = 0;

   $('.1sllspeichern').click(function(){
	    var ajaxurl = 'tools/changelademodusd.php?sofortlllp1=' + slider.value;
	    $.post(ajaxurl, 'sofortlllp1', function (response) {
	   $('#dergraph').hide();
	   $('#einstellungen').hide();
	   $('#sofortll').hide();
		$('#main').show();

	    });



    });



       	   });
   $('.1zurueck').click(function(){
		dash = 1;
	$('#dergraph').hide();
	$('#einstellungen').hide();
	$('#sofortll').hide();
	$('#main').show();
});
   $('.1hilfe').click(function(){
		dash = 1;
	$('#dergraph').hide();
	$('#einstellungen').show();
	$('#sofortll').hide();
	$('#main').hide();
	$('#hilfe').show();
	$('#status').hide();

});
   $('.1stop').click(function(){
	   if ( lock == 0 ) {
		if ( displaypinaktiv == 1){
			$('#pin').show();
			lock = 1;
	   	        stop = 1;
		} else {
			execstop();
		}
	   }
});
   $('.1sofort').click(function(){
	   if ( lock == 0 ) {
	   if ( displaypinaktiv == 1){
	   	$('#pin').show();
		lock = 1;
	        sofort = 1;
		} else {
			execsofort();
		}
	   }
});
   $('.1standby').click(function(){
	   if ( lock == 0 ) {
	   if ( displaypinaktiv == 1){
	   	$('#pin').show();
		lock = 1;
                standby = 1;
	   } else {
		execstandby();
	   }
	   }
});
   $('.1nurpv').click(function(){
	   if ( lock == 0 ) {
		if ( displaypinaktiv == 1){
   		   lock = 1;
	   	nurpv = 1;
		$('#pin').show();
		} else {
			execnurpv();
		}
	   }
});
   $('.1minpv').click(function(){
	   if ( lock == 0 ) {
		if ( displaypinaktiv == 1){
			lock = 1;
	   		minpv = 1;
			$('#pin').show();
		
		} else {
			execminpv();
		}
	   }
	   });

});
   function lp1checkenabledclick(){
	   if ( lock == 0 ) {
		if ( displaypinaktiv == 1){
			lock = 1;
	   		lp1enab = 1;
			$('#pin').show();
		
		} else {
			lp1enabledclick();
		}
	   }
	   };
   function lp2checkenabledclick(){
	   if ( lock == 0 ) {
		if ( displaypinaktiv == 1){
			lock = 1;
	   		lp2enab = 1;
			$('#pin').show();
		
		} else {
			lp2enabledclick();
		}
	   }
	   };

(function () {
  var input = '',
  correct = displaypincode.toString().substr(0, 4);

  var dots = document.getElementsByClassName('dot'),
  numbers = document.getElementsByClassName('number');
  dots = Array.from(dots);
  numbers = Array.from(numbers);

  var numbersBox = document.getElementsByClassName('numbers')[0];
  $(numbersBox).on('click', '.number', function (evt) {
    var number = $(this);

    input += number.index() + 1;
    $(dots[input.length - 1]).addClass('active');

    if (input.length >= 4) {
      if (input !== correct) {
        dots.forEach(dot => $(dot).addClass('wrong'));
	$(document.body).addClass('wrong');
        setTimeout(function(){  
	        $('#pin').hide(); 
        }, 1400);
	lock = 0;
	stop = 0;
	lp1enab = 0;
	minpv = 0;
	nurpv = 0;
	sofort = 0;
	standby = 0;
	lp2enab = 0;
      } else
      {
        dots.forEach(dot => $(dot).addClass('correct'));
        $(document.body).addClass('correct');
	if ( stop == 1 ) {
		stop = 0;
		execstop();
	}
	if ( sofort == 1 ) {
		sofort = 0;
		execsofort();

	}
	if ( standby == 1 ) {
		standby = 0;
		execstandby();
	}
	if ( nurpv == 1 ) {
		nurpv = 0;
		execnurpv();
	}
	if ( minpv == 1 ) {
		minpv = 0;
		execminpv();
	}
	if ( lp1enab == 1 ) {
		lp1enab = 0;
		lp1enabledclick();
	}
	if ( lp2enab == 1 ) {
		lp2enab = 0;
		lp2enabledclick();
	}

	setTimeout(function(){  
	        $('#pin').hide(); 
        }, 1400);
	lock = 0;
      }
      setTimeout(function () {
        dots.forEach(dot => dot.className = 'dot');
        input = '';
      }, 900);
      setTimeout(function () {
        document.body.className = '';
      }, 1000);
    }
    setTimeout(function () {
      number.className = 'number';
    }, 1000);
  });
})();
  </script>
   <script>
//function execgraph() {
//	if ( dash == 0 ){
	var lastmanagements2 = <?php echo $lastmanagements2old ?>;
	var lastmanagement = <?php echo $lastmanagementold ?>;
	var soc1vorhanden = <?php echo $soc1vorhanden ?>;
	var speichervorhanden = <?php echo $speichervorhanden ?>;
	var graphinteractiveam = <?php echo $graphinteractiveamold ?>;
	var verbraucher1vorhanden = <?php echo $verbraucher1vorhanden ?>;
	var verbraucher1name = "<?php echo $verbraucher1_nameold ?> (I)";
	var verbrauchere1name = "<?php echo $verbraucher1_nameold ?> (E)";
	var verbraucher2vorhanden = <?php echo $verbraucher2vorhanden ?>;
	var verbraucher2name = "<?php echo $verbraucher2_nameold ?> (I)";
	var verbrauchere2name = "<?php echo $verbraucher2_nameold ?> (E)";
	var verbraucher3vorhanden = <?php echo $verbraucher3vorhanden ?>;
	var verbraucher3name = "<?php echo $verbraucher3_nameold ?>";
   </script>
 <?php 
			     if ( $displaytagesgraphold == "1\n") {
     echo ' 


	     <script>

if ( graphinteractiveam == 2 ){
	am4core.useTheme(am4themes_animated);
}
// Create chart instance
var chart = am4core.create("dailydiv", am4charts.XYChart);
chart.preloader.disabled = true;
chart.zoomOutButton.background.cornerRadius(15, 15, 15, 15);
chart.zoomOutButton.background.fill = am4core.color("#00283D");
chart.zoomOutButton.icon.stroke = am4core.color("#EFD9CE");
chart.zoomOutButton.icon.strokeWidth = 3;
chart.zoomOutButton.align = "left";
chart.zoomOutButton.scale = 1.5;
chart.numberFormatter.numberFormat = "#.## a";
// Set up data source
chart.dataSource.url = "/openWB/web/logging/graph-dailye.php";
chart.dataSource.parser = new am4core.CSVParser();
chart.dataSource.parser.options.useColumnNames = false;
chart.dataSource.reloadFrequency = 240000;
//
// Create axes
var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
categoryAxis.dataFields.category = "col0";
categoryAxis.renderer.labels.template.fill = am4core.color("white");
// Create value axis
var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
valueAxis.title.text = "[white]Wh[/]";


valueAxis.renderer.labels.template.fill = am4core.color("white");
valueAxis.adapter.add("getTooltipText", (text) => {
if (text.includes("k")) {
	text = text.substring(0, text.length -1);
	text = text * 12 * 1000;
	text = Math.round(text);
	text = text +"W";
} else {
	text = text * 12 + "W";
}

return text;
});


var valueAxis2 = chart.yAxes.push(new am4charts.ValueAxis());
valueAxis2.renderer.opposite = true;
valueAxis2.title.text = "[white]% SoC";
valueAxis2.minimum = 0;
valueAxis2.maximum = 100;
valueAxis2.unit = "%";
valueAxis2.unitPosition = "right";
valueAxis2.strictMinMax = true;
valueAxis2.renderer.grid.template.disabled = true;
valueAxis2.renderer.labels.template.fill = am4core.color("white");
// Creaite series
var series1 = chart.series.push(new am4charts.LineSeries());
series1.dataFields.valueY = "col1";
series1.dataFields.categoryX = "col0";
series1.name = "EVU (I)";
series1.fill = am4core.color("#ff0000");
series1.stroke = am4core.color("#ff0000");
series1.strokeWidth = 3;
series1.tensionX = 0.8;
series1.tensionY = 0.8;
series1.strokeWidth = 1.5;
series1.fillOpacity = 0.3;

var series2 = chart.series.push(new am4charts.LineSeries());
series2.dataFields.valueY = "col3";
series2.dataFields.categoryX = "col0";
series2.name = "LL Gesamt";
series2.stroke = am4core.color("#4074c9");
series2.tensionX = 0.8;
series2.tensionY = 0.8;
series2.strokeWidth = 1.5;
series2.fill = am4core.color("#4074c9");
series2.fillOpacity = 0.3;

var series4 = chart.series.push(new am4charts.LineSeries());
series4.dataFields.valueY = "col4";
series4.dataFields.categoryX = "col0";
series4.name = "PV (E)";
series4.stroke = am4core.color("#00ff00");
series4.tensionX = 0.8;
series4.tensionY = 0.8;
series4.strokeWidth = 1.5;
series4.fill = am4core.color("#00ff00");
series4.fillOpacity = 0.3;

var series9 = chart.series.push(new am4charts.LineSeries());
series9.dataFields.valueY = "col2";
series9.dataFields.categoryX = "col0";
series9.name = "EVU (E)";
series9.stroke = am4core.color("#fff600");
series9.tensionX = 0.8;
series9.tensionY = 0.8;
series9.strokeWidth = 1.5;
series9.fill = am4core.color("#fff600");
series9.fillOpacity = 0.3;

if (speichervorhanden == 1) {
var series11 = chart.series.push(new am4charts.LineSeries());
series11.dataFields.valueY = "col5";
series11.dataFields.categoryX = "col0";
series11.name = "Speicher (I)";
series11.stroke = am4core.color("#fcbe1e");
series11.fill = am4core.color("#fcbe1e");
series11.fillOpacity = 0.3;
series11.tensionX = 0.8;
series11.tensionY = 0.8;
series11.strokeWidth = 1.5;
var series3 = chart.series.push(new am4charts.LineSeries());
series3.dataFields.valueY = "col6";
series3.dataFields.categoryX = "col0";
series3.name = "Speicher (E)";
series3.stroke = am4core.color("#fc6f1e");
series3.fill = am4core.color("#fc6f1e");
series3.fillOpacity = 0.3;
series3.tensionX = 0.8;
series3.tensionY = 0.8;
series3.strokeWidth = 1.5;
var series12 = chart.series.push(new am4charts.LineSeries());
series12.dataFields.valueY = "col12";
series12.dataFields.categoryX = "col0";
series12.name = "Speicher SoC";
series12.stroke = am4core.color("#fc6f1e");
series12.strokeWidth = 1.5;
series12.yAxis = valueAxis2;
series11.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";
series3.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";



}
var series5 = chart.series.push(new am4charts.LineSeries());
series5.dataFields.valueY = "col7";
series5.dataFields.categoryX = "col0";
series5.name = "LP 1";
series5.stroke = am4core.color("#845EC2");
series5.tensionX = 0.8;
series5.tensionY = 0.8;
series5.strokeWidth = 1.5;
if ( lastmanagement == 1) {
var series6 = chart.series.push(new am4charts.LineSeries());
series6.dataFields.valueY = "col8";
series6.dataFields.categoryX = "col0";
series6.name = "LP 2";
series6.stroke = am4core.color("#aa5ec2");
series6.tensionX = 0.8;
series6.tensionY = 0.8;
series6.strokeWidth = 1.5;
series6.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";

}
if ( lastmanagements2 == 1) {
var series30 = chart.series.push(new am4charts.LineSeries());
series30.dataFields.valueY = "col11";
series30.dataFields.categoryX = "col0";
series30.name = "LP 3";
series30.stroke = am4core.color("#aa5ec2");
series30.tensionX = 0.8;
series30.tensionY = 0.8;
series30.strokeWidth = 1.5;

}
if ( verbraucher1vorhanden == 1) {
var series31 = chart.series.push(new am4charts.LineSeries());
series31.dataFields.valueY = "col13";
series31.dataFields.categoryX = "col0";
series31.name = verbraucher1name ;
series31.stroke = am4core.color("#bb5ec2");
series31.tensionX = 0.8;
series31.tensionY = 0.8;
series31.strokeWidth = 1.5;
series31.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";
var series41 = chart.series.push(new am4charts.LineSeries());
series41.dataFields.valueY = "col14";
series41.dataFields.categoryX = "col0";
series41.name = verbrauchere1name ;
series41.stroke = am4core.color("#e01036");
series41.tensionX = 0.8;
series41.tensionY = 0.8;
series41.strokeWidth = 1.5;
series41.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";
}
if ( verbraucher2vorhanden == 1) {
var series32 = chart.series.push(new am4charts.LineSeries());
series32.dataFields.valueY = "col15";
series32.dataFields.categoryX = "col0";
series32.name = verbraucher2name ;
series32.stroke = am4core.color("#fb5ec2");
series32.tensionX = 0.8;
series32.tensionY = 0.8;
series32.strokeWidth = 1.5;
series32.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";
var series52 = chart.series.push(new am4charts.LineSeries());
series52.dataFields.valueY = "col16";
series52.dataFields.categoryX = "col0";
series52.name = verbrauchere2name ;
series52.stroke = am4core.color("#fb5ec2");
series52.tensionX = 0.8;
series52.tensionY = 0.8;
series52.strokeWidth = 1.5;
series52.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";
}
if ( verbraucher3vorhanden == 1) {
var series33 = chart.series.push(new am4charts.LineSeries());
series33.dataFields.valueY = "col16";
series33.dataFields.categoryX = "col0";
series33.name = verbraucher3name ;
series33.stroke = am4core.color("#ebeec2");
series33.tensionX = 0.8;
series33.tensionY = 0.8;
series33.strokeWidth = 1.5;
series33.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";

}
var series8 = chart.series.push(new am4charts.LineSeries());
series8.dataFields.valueY = "col9";
series8.dataFields.categoryX = "col0";
series8.name = "Lp1 SoC";
series8.stroke = am4core.color("#845EC2");
//series8.tensionX = 0.8;
//series8.tensionY = 0.8;
series8.strokeWidth = 1.5;
series8.yAxis = valueAxis2;


if (soc1vorhanden == 1) {
var series10 = chart.series.push(new am4charts.LineSeries());
series10.dataFields.valueY = "col10";
series10.dataFields.categoryX = "col0";
series10.name = "Lp2 SoC";
series10.stroke = am4core.color("#aa5ec2");
//series9.tensionX = 0.8;
//series9.tensionY = 0.8;
series10.strokeWidth = 1.5;
series10.yAxis = valueAxis2;
}

chart.cursor = new am4charts.XYCursor();
chart.cursor.lineX.stroke = am4core.color("#ffffff");
chart.cursor.lineX.strokeWidth = 2;
chart.cursor.lineX.strokeOpacity = 0.7;
chart.cursor.lineX.strokeDasharray = "";
chart.cursor.lineY.stroke = am4core.color("#ffffff");
chart.cursor.lineY.strokeWidth = 2;
chart.cursor.lineY.strokeOpacity = 0.7;
chart.cursor.lineY.strokeDasharray = "";
// Add legend
series4.customField = 12;
series1.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";
series4.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";
series2.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";
series9.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";
series5.legendSettings.valueText = "[{color} font-size: 12px]{valueY.sum}Wh[/]";

chart.legend = new am4charts.Legend();
chart.legend.labels.template.text = "[bold {color} font-size: 12px]{name}[/]";

chart.legend.markers.template.disabled = true;
chart.legend.position = "absolute";
//}
//}
  </script>
  '; } ?>
</body>
<script src="/openWB/web/js/mqttws31.js"></script>

<script src="/openWB/web/display/alllive.js"></script>
<script src="./display/symbollive.js"></script>
<script src="/openWB/web/live.js?vers=2"></script>
</html>
